import{u as _,j as t}from"./query-BgC-0ePs.js";import{e as C,u as $,r as D,L as W}from"./vendor-CvdBrt7H.js";import{s as x}from"./index-laD0T8Yw.js";import{e as q,b as I,u as T}from"./useDashboard-CXzg9wgv.js";import{u as O}from"./useEffectiveOwner-BN9vJCNM.js";import{b as L}from"./useAccounts-OopLnqh2.js";import"./supabase-GtAdROLV.js";import"./accounts-BqGB46ES.js";const N={async getByAutomation(e,n={}){const{status:i,limit:o=50,offset:l=0}=n;let p=x.from("automation_enrollments").select(`
        *,
        account:accounts(
          account_unique_id,
          name,
          person_email,
          email,
          primary_contact_first_name,
          primary_contact_last_name
        )
      `).eq("automation_id",e).order("enrolled_at",{ascending:!1}).range(l,l+o-1);i&&(p=p.eq("status",i));const{data:s,error:h}=await p;if(h)throw h;return s},async getByAccount(e,n={}){const{status:i}=n;let o=x.from("automation_enrollments").select(`
        *,
        automation:automations(id, name, category, status)
      `).eq("account_id",e).order("enrolled_at",{ascending:!1});i&&(o=o.eq("status",i));const{data:l,error:p}=await o;if(p)throw p;return l},async getById(e){const{data:n,error:i}=await x.from("automation_enrollments").select(`
        *,
        account:accounts(*),
        automation:automations(*)
      `).eq("id",e).single();if(i)throw i;return n},async getStats(e){const{data:n,error:i}=await x.from("automation_enrollments").select("status, emails_sent, emails_opened, emails_clicked").eq("automation_id",e);if(i)throw i;const o={total:n.length,active:0,completed:0,exited:0,paused:0,totalEmailsSent:0,totalOpens:0,totalClicks:0};return n.forEach(l=>{o[l.status.toLowerCase()]++,o.totalEmailsSent+=l.emails_sent||0,o.totalOpens+=l.emails_opened||0,o.totalClicks+=l.emails_clicked||0}),o},async canEnroll(e,n){const{data:i,error:o}=await x.rpc("can_enroll_in_automation",{p_account_id:e,p_automation_id:n});if(o)throw o;return i},async enroll(e,n,i={}){var a;if(!await this.canEnroll(n,e))throw new Error("Account cannot be enrolled in this automation");const{data:l,error:p}=await x.from("automations").select("nodes").eq("id",e).single();if(p)throw p;const s=(a=l.nodes)==null?void 0:a[0],{data:h,error:j}=await x.from("automation_enrollments").insert({automation_id:e,account_id:n,status:"Active",current_node_id:(s==null?void 0:s.id)||null,metadata:i}).select().single();if(j)throw j;return h},async bulkEnroll(e,n){const i={enrolled:[],skipped:[],errors:[]};for(const o of n)try{if(await this.canEnroll(o,e)){const p=await this.enroll(e,o);i.enrolled.push(p)}else i.skipped.push(o)}catch(l){i.errors.push({accountId:o,error:l.message})}return i},async exit(e,n="manual"){const{data:i,error:o}=await x.from("automation_enrollments").update({status:"Exited",exit_reason:n,exited_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e).select().single();if(o)throw o;return i},async pause(e){const{data:n,error:i}=await x.from("automation_enrollments").update({status:"Paused",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return n},async resume(e){const{data:n,error:i}=await x.from("automation_enrollments").update({status:"Active",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return n},async complete(e){const{data:n,error:i}=await x.from("automation_enrollments").update({status:"Completed",completed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return n},async updateProgress(e,n,i=null){const{data:o,error:l}=await x.from("automation_enrollments").update({current_node_id:n,current_branch:i,last_action_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e).select().single();if(l)throw l;return o},async setNextAction(e,n){const{data:i,error:o}=await x.from("automation_enrollments").update({next_action_at:n,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(o)throw o;return i},async incrementEmailSent(e){const{data:n,error:i}=await x.rpc("increment_enrollment_email_sent",{p_enrollment_id:e});if(i){const{data:o}=await x.from("automation_enrollments").select("emails_sent").eq("id",e).single();return x.from("automation_enrollments").update({emails_sent:((o==null?void 0:o.emails_sent)||0)+1}).eq("id",e)}return n},async getReadyForAction(){const{data:e,error:n}=await x.from("automation_enrollments").select(`
        *,
        automation:automations(*),
        account:accounts(*)
      `).eq("status","Active").lte("next_action_at",new Date().toISOString()).order("next_action_at");if(n)throw n;return e},async getHistory(e){const{data:n,error:i}=await x.from("enrollment_history").select(`
        *,
        email_log:email_logs(id, subject, status, sent_at, first_opened_at, first_clicked_at)
      `).eq("enrollment_id",e).order("created_at",{ascending:!0});if(i)throw i;return n},async logHistory(e,n){const{data:i,error:o}=await x.from("enrollment_history").insert({enrollment_id:e,...n}).select().single();if(o)throw o;return i}};function P(e,n={}){return _({queryKey:["enrollments","account",e,n],queryFn:()=>N.getByAccount(e,n),enabled:!!e,staleTime:3e4})}function H(e,n={}){const{ownerIds:i,filterKey:o}=O();return _({queryKey:["emailLogs",o,"account",e,n],queryFn:()=>q.getByAccount(i,e,n),enabled:i.length>0&&!!e,staleTime:3e4})}const F=()=>{const{userId:e}=C();return e};function K(e,n=20){const i=F();return _({queryKey:["activity",i,"account",e],queryFn:()=>I.getByAccount(i,e,n),enabled:!!i&&!!e,staleTime:3e4})}const m=({width:e="100%",height:n="20px"})=>t.jsx("div",{style:{width:e,height:n,backgroundColor:"currentColor",opacity:.1,borderRadius:"4px"}}),z=({status:e,theme:n})=>{const i={active:{bg:`${n.success}20`,text:n.success},pending:{bg:`${n.warning}20`,text:n.warning},cancelled:{bg:`${n.danger}20`,text:n.danger},expired:{bg:`${n.textMuted}20`,text:n.textMuted}},o=i[e]||i.pending;return t.jsx("span",{style:{padding:"4px 10px",backgroundColor:o.bg,color:o.text,borderRadius:"20px",fontSize:"11px",fontWeight:"500",textTransform:"capitalize"},children:e})},y=({event:e,theme:n})=>{const i={sent:"ðŸ“¤",delivered:"âœ…",opened:"ðŸ“¬",clicked:"ðŸ–±ï¸",bounced:"âŒ",unsubscribed:"ðŸš«"};return t.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"2px 8px",backgroundColor:n.bgHover,borderRadius:"4px",fontSize:"11px",color:n.textSecondary},children:[i[e]||"ðŸ“§"," ",e]})},U=({policy:e,theme:n})=>{var s;const i=e.expiration_date?Math.ceil((new Date(e.expiration_date)-new Date)/864e5):null,o=e.policy_lob||e.policy_type||"Unknown",l=e.policy_status||e.status||"unknown",p=((s=e.carrier)==null?void 0:s.name)||e.carrier_name||e.carrier||"â€”";return t.jsxs("div",{style:{padding:"16px",backgroundColor:n.bg,borderRadius:"10px",border:`1px solid ${n.border}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[t.jsx("div",{style:{padding:"8px 12px",backgroundColor:`${n.primary}15`,borderRadius:"8px",fontSize:"14px",fontWeight:"600",color:n.primary},children:o}),t.jsx(z,{status:l.toLowerCase(),theme:n})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",fontSize:"13px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{color:n.textMuted,fontSize:"11px",marginBottom:"2px"},children:"Policy Number"}),t.jsx("div",{style:{color:n.text},children:e.policy_number||"â€”"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{color:n.textMuted,fontSize:"11px",marginBottom:"2px"},children:"Carrier"}),t.jsx("div",{style:{color:n.text},children:p})]}),t.jsxs("div",{children:[t.jsx("div",{style:{color:n.textMuted,fontSize:"11px",marginBottom:"2px"},children:"Effective Date"}),t.jsx("div",{style:{color:n.text},children:e.effective_date?new Date(e.effective_date).toLocaleDateString():"â€”"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{color:n.textMuted,fontSize:"11px",marginBottom:"2px"},children:"Expiration"}),t.jsx("div",{style:{color:i!==null&&i>0&&i<=30?n.warning:n.text},children:e.expiration_date?t.jsxs(t.Fragment,{children:[new Date(e.expiration_date).toLocaleDateString(),i!==null&&i>0&&i<=30&&t.jsxs("span",{style:{fontSize:"11px",marginLeft:"6px"},children:["(",i,"d left)"]})]}):"â€”"})]})]}),(e.premium||e.annual_premium)&&t.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:`1px solid ${n.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"12px",color:n.textMuted},children:"Annual Premium"}),t.jsxs("span",{style:{fontSize:"16px",fontWeight:"600",color:n.success},children:["$",(e.premium||e.annual_premium).toLocaleString()]})]})]})},G=({log:e,theme:n})=>{var i;return t.jsxs("div",{style:{padding:"14px",backgroundColor:n.bg,borderRadius:"8px",border:`1px solid ${n.border}`,marginBottom:"8px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"13px",fontWeight:"500",color:n.text},children:((i=e.email_templates)==null?void 0:i.name)||"Direct Email"}),t.jsx("div",{style:{fontSize:"12px",color:n.textSecondary,marginTop:"2px"},children:e.subject})]}),t.jsx("div",{style:{textAlign:"right"},children:t.jsxs("div",{style:{fontSize:"11px",color:n.textMuted},children:[new Date(e.sent_at).toLocaleDateString()," at"," ",new Date(e.sent_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})})]}),t.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:[t.jsx(y,{event:"sent",theme:n}),e.delivered_at&&t.jsx(y,{event:"delivered",theme:n}),e.opened_at&&t.jsx(y,{event:"opened",theme:n}),e.clicked_at&&t.jsx(y,{event:"clicked",theme:n}),e.bounced_at&&t.jsx(y,{event:"bounced",theme:n})]})]})},Q=({activity:e,theme:n})=>{const i={email_sent:"ðŸ“¤",email_opened:"ðŸ“¬",email_clicked:"ðŸ–±ï¸",enrollment_started:"â–¶ï¸",enrollment_completed:"âœ…",enrollment_paused:"â¸ï¸",note_added:"ðŸ“"};return t.jsxs("div",{style:{display:"flex",gap:"12px",padding:"12px 0"},children:[t.jsx("div",{style:{width:"32px",height:"32px",backgroundColor:n.bgHover,borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:i[e.action_type]||"ðŸ“Œ"}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:"13px",color:n.text},children:e.description}),t.jsx("div",{style:{fontSize:"11px",color:n.textMuted,marginTop:"2px"},children:new Date(e.created_at).toLocaleString()})]})]})},R=({enrollment:e,theme:n,userId:i})=>{var o;return t.jsxs("div",{style:{padding:"14px",backgroundColor:n.bg,borderRadius:"8px",border:`1px solid ${n.border}`,marginBottom:"8px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx(W,{to:`/${i}/automations/${e.automation_id}`,style:{fontSize:"14px",fontWeight:"500",color:n.text,textDecoration:"none"},children:((o=e.automations)==null?void 0:o.name)||"Unknown Automation"}),t.jsxs("div",{style:{fontSize:"12px",color:n.textMuted,marginTop:"2px"},children:["Started ",new Date(e.enrolled_at).toLocaleDateString()]})]}),t.jsx(z,{status:e.status==="active"?"active":e.status,theme:n})]}),e.current_node_id&&t.jsxs("div",{style:{marginTop:"10px",padding:"8px 10px",backgroundColor:n.bgHover,borderRadius:"6px",fontSize:"12px",color:n.textSecondary},children:["ðŸ“ Current step: ",e.current_node_name||e.current_node_id]})]})},ie=({t:e})=>{var S,w;const{userId:n,accountId:i}=C(),o=$(),[l,p]=D.useState("overview"),{data:s,isLoading:h,error:j}=L(i),{data:a,isLoading:A}=H(l==="overview"||l==="emails"?i:null),{data:b,isLoading:B}=K(l==="activity"?i:null),{data:u,isLoading:M}=P(l==="overview"||l==="automations"?i:null),{data:f}=T(),d={emailsSent:(a==null?void 0:a.length)||0,opened:(a==null?void 0:a.filter(r=>r.opened_at).length)||0,clicked:(a==null?void 0:a.filter(r=>r.clicked_at).length)||0,openRate:(a==null?void 0:a.length)>0?Math.round(a.filter(r=>r.opened_at).length/a.length*100):0,clickRate:(a==null?void 0:a.length)>0?Math.round(a.filter(r=>r.clicked_at).length/a.length*100):0,activeEnrollments:(u==null?void 0:u.filter(r=>r.status==="active").length)||0},c={openRate:(f==null?void 0:f.openRate)||25,clickRate:(f==null?void 0:f.clickRate)||5};if(h)return t.jsxs("div",{children:[t.jsx(m,{width:"200px",height:"32px"}),t.jsx("div",{style:{marginTop:"20px"},children:t.jsx(m,{height:"200px"})})]});if(j||!s)return t.jsxs("div",{style:{padding:"60px 20px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"ðŸ˜•"}),t.jsx("h2",{style:{color:e.text,marginBottom:"8px"},children:"Account Not Found"}),t.jsx("p",{style:{color:e.textSecondary,marginBottom:"24px"},children:"We couldn't find the account you're looking for."}),t.jsx("button",{onClick:()=>o(`/${n}/accounts`),style:{padding:"10px 20px",backgroundColor:e.primary,border:"none",borderRadius:"8px",color:"#fff",cursor:"pointer",fontSize:"14px"},children:"Back to Accounts"})]});const E=[{id:"overview",label:"Overview"},{id:"emails",label:`Emails (${(a==null?void 0:a.length)||0})`},{id:"automations",label:`Automations (${(u==null?void 0:u.length)||0})`},{id:"activity",label:"Activity"}];return t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("button",{onClick:()=>o(`/${n}/accounts`),style:{background:"none",border:"none",color:e.textMuted,cursor:"pointer",fontSize:"14px",marginBottom:"12px",padding:0,display:"flex",alignItems:"center",gap:"6px"},children:"â† Back to Accounts"}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"24px",fontWeight:"700",color:e.text,marginBottom:"4px"},children:s.name}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(()=>{const r=(s.account_status||"").toLowerCase();let g=r;(r==="prior_customer"||r.startsWith("prior"))&&(g="prior"),r.startsWith("customer")&&(g="customer"),r.startsWith("prospect")&&(g="prospect"),r.startsWith("lead")&&(g="lead");const k={customer:{bg:`${e.success}20`,text:e.success,label:"Customer"},prospect:{bg:`${e.primary}20`,text:e.primary,label:"Prospect"},prior:{bg:`${e.textMuted}20`,text:e.textMuted,label:"Prior Customer"},lead:{bg:`${e.warning}20`,text:e.warning,label:"Lead"}},v=k[g]||k.prospect;return t.jsx("span",{style:{padding:"4px 10px",backgroundColor:v.bg,color:v.text,borderRadius:"20px",fontSize:"12px",fontWeight:"500"},children:v.label})})(),s.account_unique_id&&t.jsxs("span",{style:{fontSize:"12px",color:e.textMuted},children:["ID: ",s.account_unique_id]})]})]}),t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsx("button",{style:{padding:"10px 16px",backgroundColor:e.bgHover,border:`1px solid ${e.border}`,borderRadius:"8px",color:e.text,cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px"},children:"ðŸ“ Add Note"}),t.jsx("button",{style:{padding:"10px 16px",backgroundColor:e.primary,border:"none",borderRadius:"8px",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px"},children:"ðŸ“§ Send Email"})]})]})]}),t.jsxs("div",{style:{display:"flex",gap:"24px",padding:"16px 20px",backgroundColor:e.bgCard,borderRadius:"12px",border:`1px solid ${e.border}`,marginBottom:"24px",flexWrap:"wrap"},children:[(s.person_email||s.email)&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{style:{fontSize:"16px"},children:"ðŸ“§"}),t.jsx("a",{href:`mailto:${s.person_email||s.email}`,style:{color:e.primary,textDecoration:"none",fontSize:"14px"},children:s.person_email||s.email})]}),s.phone&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{style:{fontSize:"16px"},children:"ðŸ“±"}),t.jsx("a",{href:`tel:${s.phone}`,style:{color:e.text,textDecoration:"none",fontSize:"14px"},children:s.phone})]}),(s.billing_street||s.billing_city||s.billing_state)&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{style:{fontSize:"16px"},children:"ðŸ“"}),t.jsx("span",{style:{color:e.textSecondary,fontSize:"14px"},children:[s.billing_street,[s.billing_city,s.billing_state].filter(Boolean).join(", "),s.billing_postal_code].filter(Boolean).join(" â€¢ ")})]}),s.primary_contact_first_name&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{style:{fontSize:"16px"},children:"ðŸ‘¤"}),t.jsxs("span",{style:{color:e.textSecondary,fontSize:"14px"},children:[s.primary_contact_first_name," ",s.primary_contact_last_name]})]})]}),t.jsx("div",{style:{display:"flex",gap:"4px",marginBottom:"24px",backgroundColor:e.bgHover,padding:"4px",borderRadius:"10px",width:"fit-content"},children:E.map(r=>t.jsx("button",{onClick:()=>p(r.id),style:{padding:"10px 20px",backgroundColor:l===r.id?e.bgCard:"transparent",border:"none",borderRadius:"8px",color:l===r.id?e.text:e.textSecondary,cursor:"pointer",fontSize:"13px",fontWeight:"500"},children:r.label},r.id))}),l==="overview"&&t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[t.jsxs("div",{style:{padding:"20px",backgroundColor:e.bgCard,borderRadius:"12px",border:`1px solid ${e.border}`,display:"flex",flexDirection:"column"},children:[t.jsxs("h3",{style:{fontSize:"16px",fontWeight:"600",color:e.text,marginBottom:"16px",flexShrink:0},children:["Policies (",((S=s.policies)==null?void 0:S.length)||0,")"]}),((w=s.policies)==null?void 0:w.length)>0?t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",overflowY:"auto",flex:1,paddingRight:"8px"},children:s.policies.map((r,g)=>t.jsx(U,{policy:r,theme:e},g))}):t.jsx("div",{style:{padding:"30px",textAlign:"center",color:e.textMuted},children:"No policies on file"})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[t.jsxs("div",{style:{padding:"20px",backgroundColor:e.bgCard,borderRadius:"12px",border:`1px solid ${e.border}`},children:[t.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:e.text,marginBottom:"16px"},children:"Email Engagement"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",marginBottom:"20px"},children:[t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:e.primary},children:d.emailsSent}),t.jsx("div",{style:{fontSize:"11px",color:e.textMuted},children:"Sent"})]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:e.success},children:d.opened}),t.jsx("div",{style:{fontSize:"11px",color:e.textMuted},children:"Opened"})]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:e.warning},children:d.clicked}),t.jsx("div",{style:{fontSize:"11px",color:e.textMuted},children:"Clicked"})]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:e.danger},children:(a==null?void 0:a.filter(r=>r.bounced_at).length)||0}),t.jsx("div",{style:{fontSize:"11px",color:e.textMuted},children:"Bounced"})]})]})]}),t.jsxs("div",{style:{padding:"20px",backgroundColor:e.bgCard,borderRadius:"12px",border:`1px solid ${e.border}`},children:[t.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:e.text,marginBottom:"16px"},children:"Compared to Average"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[t.jsx("span",{style:{fontSize:"13px",color:e.textSecondary},children:"Open Rate"}),t.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:d.openRate>=c.openRate?e.success:e.danger},children:[d.openRate,"%",d.openRate>=c.openRate?" â†‘":" â†“"]})]}),t.jsxs("div",{style:{position:"relative",height:"8px",backgroundColor:e.bgHover,borderRadius:"4px",overflow:"hidden"},children:[t.jsx("div",{style:{position:"absolute",left:`${Math.min(c.openRate,100)}%`,top:0,width:"2px",height:"100%",backgroundColor:e.textMuted,zIndex:2}}),t.jsx("div",{style:{width:`${Math.min(d.openRate,100)}%`,height:"100%",backgroundColor:d.openRate>=c.openRate?e.success:e.warning,borderRadius:"4px",transition:"width 0.3s"}})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px"},children:[t.jsx("span",{style:{fontSize:"10px",color:e.textMuted},children:"0%"}),t.jsxs("span",{style:{fontSize:"10px",color:e.textMuted},children:["Avg: ",c.openRate,"%"]}),t.jsx("span",{style:{fontSize:"10px",color:e.textMuted},children:"100%"})]})]}),t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[t.jsx("span",{style:{fontSize:"13px",color:e.textSecondary},children:"Click Rate"}),t.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:d.clickRate>=c.clickRate?e.success:e.danger},children:[d.clickRate,"%",d.clickRate>=c.clickRate?" â†‘":" â†“"]})]}),t.jsxs("div",{style:{position:"relative",height:"8px",backgroundColor:e.bgHover,borderRadius:"4px",overflow:"hidden"},children:[t.jsx("div",{style:{position:"absolute",left:`${Math.min(c.clickRate*5,100)}%`,top:0,width:"2px",height:"100%",backgroundColor:e.textMuted,zIndex:2}}),t.jsx("div",{style:{width:`${Math.min(d.clickRate*5,100)}%`,height:"100%",backgroundColor:d.clickRate>=c.clickRate?e.success:e.warning,borderRadius:"4px",transition:"width 0.3s"}})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px"},children:[t.jsx("span",{style:{fontSize:"10px",color:e.textMuted},children:"0%"}),t.jsxs("span",{style:{fontSize:"10px",color:e.textMuted},children:["Avg: ",c.clickRate,"%"]}),t.jsx("span",{style:{fontSize:"10px",color:e.textMuted},children:"20%+"})]})]}),t.jsxs("div",{style:{padding:"16px",backgroundColor:e.bg,borderRadius:"10px",textAlign:"center",marginTop:"8px"},children:[t.jsx("div",{style:{fontSize:"11px",color:e.textMuted,marginBottom:"4px"},children:"ENGAGEMENT SCORE"}),t.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:d.openRate>=c.openRate&&d.clickRate>=c.clickRate?e.success:d.openRate>=c.openRate||d.clickRate>=c.clickRate?e.warning:e.danger},children:d.emailsSent===0?"â€”":d.openRate>=c.openRate&&d.clickRate>=c.clickRate?"High":d.openRate>=c.openRate||d.clickRate>=c.clickRate?"Medium":"Low"}),t.jsx("div",{style:{fontSize:"12px",color:e.textSecondary,marginTop:"4px"},children:d.emailsSent===0?"No emails sent yet":d.openRate>=c.openRate?"Above average engagement":"Below average engagement"})]})]})]}),t.jsxs("div",{style:{padding:"20px",backgroundColor:e.bgCard,borderRadius:"12px",border:`1px solid ${e.border}`},children:[t.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:e.text,marginBottom:"16px"},children:"Active Automations"}),(u==null?void 0:u.filter(r=>r.status==="active").length)>0?u.filter(r=>r.status==="active").map(r=>t.jsx(R,{enrollment:r,theme:e,userId:n},r.id)):t.jsx("div",{style:{padding:"20px",textAlign:"center",color:e.textMuted,fontSize:"13px"},children:"Not enrolled in any automations"})]})]})]}),l==="emails"&&t.jsxs("div",{style:{padding:"20px",backgroundColor:e.bgCard,borderRadius:"12px",border:`1px solid ${e.border}`},children:[t.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:e.text,marginBottom:"16px"},children:"Email History"}),A?Array.from({length:3}).map((r,g)=>t.jsx("div",{style:{marginBottom:"12px"},children:t.jsx(m,{height:"80px"})},g)):(a==null?void 0:a.length)>0?a.map(r=>t.jsx(G,{log:r,theme:e},r.id)):t.jsx("div",{style:{padding:"40px",textAlign:"center",color:e.textMuted},children:"No emails sent to this client yet"})]}),l==="automations"&&t.jsxs("div",{style:{padding:"20px",backgroundColor:e.bgCard,borderRadius:"12px",border:`1px solid ${e.border}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:e.text,margin:0},children:"Automation Enrollments"}),t.jsx("button",{style:{padding:"8px 12px",backgroundColor:e.primary,border:"none",borderRadius:"6px",color:"#fff",cursor:"pointer",fontSize:"12px"},children:"+ Enroll in Automation"})]}),M?Array.from({length:2}).map((r,g)=>t.jsx("div",{style:{marginBottom:"12px"},children:t.jsx(m,{height:"60px"})},g)):(u==null?void 0:u.length)>0?u.map(r=>t.jsx(R,{enrollment:r,theme:e,userId:n},r.id)):t.jsx("div",{style:{padding:"40px",textAlign:"center",color:e.textMuted},children:"Not enrolled in any automations"})]}),l==="activity"&&t.jsxs("div",{style:{padding:"20px",backgroundColor:e.bgCard,borderRadius:"12px",border:`1px solid ${e.border}`},children:[t.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:e.text,marginBottom:"16px"},children:"Activity Timeline"}),B?Array.from({length:5}).map((r,g)=>t.jsxs("div",{style:{display:"flex",gap:"12px",padding:"12px 0"},children:[t.jsx(m,{width:"32px",height:"32px"}),t.jsxs("div",{style:{flex:1},children:[t.jsx(m,{width:"80%",height:"14px"}),t.jsx("div",{style:{marginTop:"4px"},children:t.jsx(m,{width:"120px",height:"12px"})})]})]},g)):(b==null?void 0:b.length)>0?t.jsx("div",{style:{borderLeft:`2px solid ${e.border}`,marginLeft:"15px",paddingLeft:"20px"},children:b.map(r=>t.jsx(Q,{activity:r,theme:e},r.id))}):t.jsx("div",{style:{padding:"40px",textAlign:"center",color:e.textMuted},children:"No activity recorded yet"})]})]})};export{ie as default};
